<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>ê²°ê³¼ í˜ì´ì§€ - ë§‰ëŒ€ ê·¸ë˜í”„ ì˜¤ë²„ë ˆì´</title>
    <style>
        /* ------------------------------------------- */
        /* 1. ê¸°ë³¸ ì„¤ì • ë° ë·°í¬íŠ¸ ê³ ì • */
        /* ------------------------------------------- */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%; 
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            box-sizing: border-box;
            background-color: #ffffff; 
            overflow: hidden; 
        }

        /* ------------------------------------------- */
        /* 2. ë©”ì¸ ì»¨í…Œì´ë„ˆ (ëª¨ë°”ì¼ ë·°í¬íŠ¸ ì—­í• ) */
        /* ------------------------------------------- */
        #result-container {
            width: 100%;
            max-width: 375px; /* ëª¨ë°”ì¼ ê¸°ê¸° ë„ˆë¹„ ì œí•œ ìœ ì§€ */
            height: 100%;
            position: relative; /* ì ˆëŒ€ ìœ„ì¹˜ ìš”ì†Œì˜ ê¸°ì¤€ì  */
            background-color: #ffffff; 
            overflow-y: auto; /* ìŠ¤í¬ë¡¤ í™œì„±í™” */
            -webkit-overflow-scrolling: touch;
            
            /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° */
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        #result-container::-webkit-scrollbar {
            display: none;
            width: 0;
            height: 0;
        }
        
        /* ------------------------------------------- */
        /* 3. ì½˜í…ì¸  ì˜ì—­ ë° ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        /* ------------------------------------------- */
        
        /* ê²°ê³¼ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .result-image {
            width: 100%; 
            height: auto;
            display: block;
        }
        
        /* ------------------------------------------- */
        /* 4. ë§‰ëŒ€ ê·¸ë˜í”„ ì„¹ì…˜ ìŠ¤íƒ€ì¼ (ì ˆëŒ€ ìœ„ì¹˜ ì˜¤ë²„ë ˆì´ - í”½ì…€ ë‹¨ìœ„ ìœ ì§€) */
        /* ------------------------------------------- */
        
        .stat-section {
            /* Y ìœ„ì¹˜ 993.5px ê³ ì • */
            position: absolute;
            top: 993.5px; 
            left: 0;
            width: 100%; 
            box-sizing: border-box;
            /* X ìœ„ì¹˜ 108px ê³ ì • */
            padding-left: 108px; 
            /* ë§‰ëŒ€ 100% ê¸¸ì´ ì¡°ì •: 45pxë¡œ ë³µêµ¬ */
            padding-right: 45px; 
        }
        
        .stat-item {
            height: 5px; /* ë§‰ëŒ€ êµµê¸° 5px ê³ ì • */
            margin-bottom: 95px; /* ë§‰ëŒ€ ê°„ê²© 100px ìœ ì§€ */
            position: relative; 
            display: flex;
            align-items: center;
            box-sizing: border-box;
            /* í¼ì„¼íŠ¸ ìˆ«ì ê³µê°„ í™•ë³´: 45pxë¡œ ë³µêµ¬ */
            padding-right: 45px; 
        }
        
        /* ë§‰ëŒ€ ê·¸ë˜í”„ ì»¨í…Œì´ë„ˆ */
        .bar-container {
            flex-grow: 1;
            height: 100%; 
            background-color: transparent; 
            border-radius: 2.5px; 
            overflow: hidden;
            position: relative; 
        }

        /* ì‹¤ì œ ì±„ì›Œì§€ëŠ” ë§‰ëŒ€ */
        .bar {
            height: 100%;
            width: 0%; /* JSë¡œ ì—…ë°ì´íŠ¸ë  ì˜ˆì •. ì´ˆê¸°ê°’ 0% */
            border-radius: 2.5px; 
            transition: width 0.5s ease-out;
        }

        /* í¼ì„¼íŠ¸ ìˆ«ì ìŠ¤íƒ€ì¼ */
        .score-info {
            position: absolute;
            top: 50%; 
            right: 0; 
            transform: translateY(-50%); 
            font-size: 13px; 
            font-weight: 700; 
            color: #161317; 
            text-align: right;
            /* í¼ì„¼íŠ¸ ìˆ«ì ê³µê°„: 45pxë¡œ ë³µêµ¬ */
            width: 45px; 
        }

        /* ìƒ‰ìƒ ì •ì˜ */
        .yellow-bar { background-color: #FFD600; } 
        .purple-bar { background-color: #8A2BE2; } 
        .pink-bar { background-color: #FF69B4; } 
        .green-bar { background-color: #3CB371; } 

    </style>
</head>
<body>
    <div id="result-container">
        
        <img src="Image/ê²°ê³¼1_ë””ì§€í„¸.svg" alt="ë””ì§€í„¸ ê³¼ë¶€í•˜ ê²°ê³¼ ì´ë¯¸ì§€" class="result-image">
        
        <div class="stat-section">
            
            <div class="stat-item">
                <div class="bar-container">
                    <div class="bar yellow-bar result-bar bar-1" style="width: 0%;"></div>
                </div>
                <span class="score-info percentage-text text-1">0%</span>
            </div>
            
            <div class="stat-item">
                <div class="bar-container">
                    <div class="bar purple-bar result-bar bar-2" style="width: 0%;"></div>
                </div>
                <span class="score-info percentage-text text-2">0%</span>
            </div>
            
            <div class="stat-item">
                <div class="bar-container">
                    <div class="bar pink-bar result-bar bar-3" style="width: 0%;"></div>
                </div>
                <span class="score-info percentage-text text-3">0%</span>
            </div>
            
            <div class="stat-item">
                <div class="bar-container">
                    <div class="bar green-bar result-bar bar-4" style="width: 0%;"></div>
                </div>
                <span class="score-info percentage-text text-4">0%</span>
            </div>
            
        </div>
        
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // ğŸš¨ğŸš¨ğŸš¨ ìµœëŒ€ ì ìˆ˜ ì„¤ì • (8ë¬¸í•­ * ìµœëŒ€ 3ì  = 24ì ) ğŸš¨ğŸš¨ğŸš¨
            const MAX_SCORE_PER_VARIABLE = 24; 
            
            // =========================================================================
            // 1. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìµœì¢… ì ìˆ˜ ë°ì´í„° ë¡œë“œ
            // =========================================================================
            const scoresString = localStorage.getItem('finalQuizScores');
            if (!scoresString) {
                console.error('í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (finalQuizScores is missing).');
                // alert('í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì£¼ì„¸ìš”.');
                return;
            }

            const finalScores = JSON.parse(scoresString);
            
            // ì ìˆ˜ ê°ì²´ì—ì„œ ê° í•­ëª© ì¶”ì¶œ
            const yellowScore = finalScores.Yellow || 0;
            const purpleScore = finalScores.Purple || 0;
            const pinkScore = finalScores.Pink || 0;
            const greenScore = finalScores.Green || 0;
            
            // ============================================  =============================
            // 2. í¼ì„¼íŠ¸ ê³„ì‚° (ì ìˆ˜ / 24ì  * 100)
            // =========================================================================
            const calculatePercentage = (score) => {
                // ì ìˆ˜ë¥¼ ìµœëŒ€ ì ìˆ˜(24)ë¡œ ë‚˜ëˆˆ í›„ 100ì„ ê³±í•˜ê³  ë°˜ì˜¬ë¦¼
                return Math.round((score / MAX_SCORE_PER_VARIABLE) * 100); 
            };

            const percentage = {
                Yellow: calculatePercentage(yellowScore),
                Purple: calculatePercentage(purpleScore),
                Pink: calculatePercentage(pinkScore),
                Green: calculatePercentage(greenScore)
            };
            
            console.log('ê³„ì‚°ëœ í¼ì„¼íŠ¸ (24ì  ê¸°ì¤€):', percentage);
            
            // =========================================================================
            // 3. UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ì •ì˜
            // =========================================================================
            const updateResultUI = (barSelector, textSelector, percent) => {
                const barElement = document.querySelector(barSelector);
                const textElement = document.querySelector(textSelector);

                if (barElement) {
                    // ë§‰ëŒ€ì˜ width ìŠ¤íƒ€ì¼ì„ í¼ì„¼íŠ¸ ê°’ìœ¼ë¡œ ì„¤ì •
                    barElement.style.width = `${percent}%`;
                }
                if (textElement) {
                    // í…ìŠ¤íŠ¸ ë‚´ìš© ì—…ë°ì´íŠ¸
                    textElement.textContent = `${percent}%`;
                }
            };

            // =========================================================================
            // 4. ê° í•­ëª©ì— ê²°ê³¼ ë°˜ì˜ (ë§¤í•‘: Yellow=1, Purple=2, Pink=3, Green=4)
            // =========================================================================
            
            // Yellow (ë…¸ë€) = ì²« ë²ˆì§¸ ë§‰ëŒ€
            updateResultUI('.result-bar.bar-1', '.percentage-text.text-1', percentage.Yellow);
            
            // Purple (ë³´ë¼) = ë‘ ë²ˆì§¸ ë§‰ëŒ€
            updateResultUI('.result-bar.bar-2', '.percentage-text.text-2', percentage.Purple);
            
            // Pink (í•‘í¬) = ì„¸ ë²ˆì§¸ ë§‰ëŒ€
            updateResultUI('.result-bar.bar-3', '.percentage-text.text-3', percentage.Pink);
            
            // Green (ì´ˆë¡) = ë„¤ ë²ˆì§¸ ë§‰ëŒ€
            updateResultUI('.result-bar.bar-4', '.percentage-text.text-4', percentage.Green);


            // =========================================================================
            // 5. í˜ì´ì§€ ì´ë™ ë²„íŠ¼ ì´ë²¤íŠ¸ ì œê±°ë¨
            // =========================================================================
            // í™ˆìœ¼ë¡œ/ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ ì½”ë“œê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.

        });
    </script>
</body>
</html>